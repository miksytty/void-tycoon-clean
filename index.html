<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <title>Void Tycoon</title>
  <meta name="description" content="Выживай, добывай ресурсы и строй империю в бесконечном мире!">

  <link rel="icon" type="image/png" href="/public/icon.png">
  <link rel="apple-touch-icon" href="/public/icon.png">

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://adsgram.ai/js/sdk.js"></script>

  <link rel="stylesheet" href="/src/styles/main.css">
</head>

<body>
  <div id="loading-screen">
    <div class="loader-container">
      <div class="loader-title">VOID TYCOON</div>
      <div class="loader-bar">
        <div class="loader-progress" id="load-progress"></div>
      </div>
      <div class="loader-text" id="load-text">Инициализация...</div>
    </div>
  </div>

  <div id="game-container"></div>

  <div id="ui-overlay">
    <!-- Dialog Container -->
    <div id="dialog-container">
      <div class="dialog-speaker">Speaker</div>
      <div class="dialog-text">Text content...</div>
      <div class="dialog-next">Touch to continue ▶</div>
    </div>
    <div id="hud">
      <div id="player-info">
        <div id="level-badge">LV <span id="player-level">1</span></div>
        <div id="xp-bar">
          <div id="xp-progress"></div>
        </div>
      </div>
      <div id="resources-panel">
        <div class="resource" id="res-wood">
          <span class="res-icon">🪵</span>
          <span class="res-count">0</span>
        </div>
        <div class="resource" id="res-iron">
          <span class="res-icon">🔩</span>
          <span class="res-count">0</span>
        </div>
        <div class="resource" id="res-crystal">
          <span class="res-icon">💎</span>
          <span class="res-count">0</span>
        </div>
      </div>
      <div id="energy-panel">
        <div id="energy-bar">
          <div id="energy-progress"></div>
        </div>
        <span id="energy-text">100/100</span>
        <!-- Free Gems Button -->
        <button id="btn-free-gems" class="ad-btn"
          style="margin-top:5px; background:linear-gradient(45deg, #00b09b, #96c93d); border:none; border-radius:4px; padding:4px 8px; color:white; font-weight:bold; cursor:pointer;">
          💎 Free (+50)
        </button>
      </div>
    </div>

    <div id="action-buttons">
      <button id="btn-build" class="action-btn">🔨</button>
      <button id="btn-inventory" class="action-btn">🎒</button>
      <button id="btn-shop" class="action-btn">🏪</button>
      <button id="btn-quests" class="action-btn">📋</button>
      <button id="btn-achievements" class="action-btn">🏆</button>
      <button id="btn-ranking" class="action-btn"
        style="display:none;">👑</button><!-- Hidden until leaderboard fixed -->
      <!-- Smelter button removed - simplified gameplay -->
      <button id="btn-skills" class="action-btn">🎓</button>
      <button id="btn-research" class="action-btn">🧪</button>
      <button id="btn-settings" class="action-btn">⚙️</button>
    </div>
  </div>

  <div id="inventory-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>🎒 Инвентарь</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div class="modal-tabs">
        <button class="tab-btn active" data-tab="items">Предметы</button>
        <button class="tab-btn" data-tab="craft">Крафт</button>
        <button class="tab-btn" data-tab="tools">Инструменты</button>
        <button class="tab-btn" data-tab="buildings">Постройки</button>
      </div>
      <div id="inventory-grid" class="tab-content active" data-tab="items"></div>
      <div id="craft-panel" class="tab-content" data-tab="craft"></div>
      <div id="tools-panel" class="tab-content" data-tab="tools"></div>
      <div id="buildings-panel" class="tab-content" data-tab="buildings"></div>
    </div>
  </div>

  <div id="shop-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>🏪 Магазин</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div id="shop-items"></div>
    </div>
  </div>

  <div id="achievements-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>🏆 Достижения</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div class="stars-display"
        style="text-align: center; padding: 10px; background: rgba(255,215,0,0.1); border-radius: 8px; margin-bottom: 15px;">
        <span style="font-size: 1.5rem;">⭐</span>
        <span id="stars-count" style="font-size: 1.2rem; font-weight: bold; color: #ffd700;">0</span>
      </div>
      <div id="achievements-list"></div>
    </div>
  </div>

  <div id="quests-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>📋 Ежедневные квесты</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div class="quests-timer"
        style="text-align: center; padding: 8px; background: rgba(108,92,231,0.1); border-radius: 8px; margin-bottom: 15px; font-size: 0.9rem; color: #888;">
        Обновление через: <span id="quests-timer">--:--:--</span>
      </div>
      <div id="quests-list"></div>
    </div>
  </div>

  <div id="ranking-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>👑 Топ Магнатов</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div class="ranking-tabs" style="display: flex; gap: 10px; margin-bottom: 15px;">
        <button class="tab-btn active" style="flex: 1;">Неделя</button>
        <button class="tab-btn" style="flex: 1;">Все время</button>
      </div>
      <div id="ranking-list" style="display: flex; flex-direction: column; gap: 8px;">
      </div>
      <div class="user-rank"
        style="margin-top: 15px; padding: 12px; background: rgba(108, 92, 231, 0.2); border: 1px solid #6c5ce7; border-radius: 10px; display: flex; align-items: center; justify-content: space-between;">
        <div style="display: flex; align-items: center; gap: 10px;">
          <span style="font-weight: bold; color: #a29bfe;">#99+</span>
          <span>Вы</span>
        </div>
        <span style="font-weight: bold; color: #ffd700;">0 XP</span>
      </div>
    </div>
  </div>

  <div id="settings-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>⚙️ Настройки</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div class="settings-list">
        <label class="setting-item">
          <span>🔊 Звуки</span>
          <input type="checkbox" id="setting-sound" checked>
        </label>
        <label class="setting-item">
          <span>🎵 Музыка</span>
          <input type="checkbox" id="setting-music" checked>
        </label>
        <label class="setting-item">
          <span>📳 Вибрация</span>
          <input type="checkbox" id="setting-haptic" checked>
        </label>
        <label class="setting-item">
          <span>📄 Privacy Policy</span>
          <a href="/privacy.html" id="link-privacy" target="_blank" style="margin-left:8px; color:#ff6b6b;">View</a>
        </label>
        <label class="setting-item">
          <span>📄 Terms of Service</span>
          <a href="/tos.html" id="link-tos" target="_blank" style="margin-left:8px; color:#ff6b6b;">View</a>
        </label>

        <hr style="border: 0; border-top: 1px solid #444; margin: 15px 0;">

        <div id="reset-confirm-container"
          style="display: none; margin-top: 15px; text-align: center; background: rgba(231, 76, 60, 0.1); padding: 10px; border-radius: 8px;">
          <p style="color: #ff6b6b; margin-bottom: 10px;">⚠️ Вы уверены? Весь прогресс будет удален!</p>
          <div style="display: flex; gap: 10px; justify-content: center;">
            <button id="btn-confirm-reset"
              style="padding: 8px 20px; background: #e74c3c; color: white; border: none; border-radius: 6px; cursor: pointer;">ДА,
              СБРОСИТЬ</button>
            <button id="btn-cancel-reset"
              style="padding: 8px 20px; background: #444; color: white; border: none; border-radius: 6px; cursor: pointer;">ОТМЕНА</button>
          </div>
        </div>

        <button id="btn-reset-progress"
          style="width: 100%; padding: 12px; background: #e74c3c; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
          🔴 Сбросить прогресс
        </button>
      </div>
      <div class="settings-footer">
        <div class="version-info">Ver: 1.0 Release</div>
        <div style="margin-top:8px; font-size:0.8rem;">
          <a href="/LICENSES.md" target="_blank" style="color:#ff6b6b;">Licenses</a>
        </div>
      </div>
    </div>
  </div>

  <div id="research-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>🧪 Лаборатория</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div id="research-list"></div>
    </div>
  </div>

  <!-- Smelter modal removed - simplified gameplay -->

  <div id="notifications-container"></div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>