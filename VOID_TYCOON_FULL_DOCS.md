# Void Tycoon - Полная документация проекта (GDD & Technical Docs)
**Версия 1.0 (Release)**
**Платформа:** Telegram Mini App
**Технологии:** Phaser 3, Vite, Vercel, Adsgram, Supabase (Leaderboard)

---

## 1. Концепция и Геймплей
**Жанр:** 2D RPG / Survival / Idle Tycoon.
**Сеттинг:** Игрок попадает в "Пустоту" (Void) — загадочный мир, где нужно выжить, построить базу и открыть портал домой.

### Основной цикл (Core Loop):
1. **Сбор (Gather):** Рубка деревьев, добыча камня и кристаллов.
2. **Крафт:** Создание инструментов, переработка ресурсов в слитки/доски.
3. **Строительство:** Постройка зданий для автоматизации (лесопилки, шахты).
4. **Бой:** Сражение с боссами для получения редких ключей и лута.
5. **Прогресс:** Прокачка уровня, навыков и открытие новых технологий.

---

## 2. Механики и Системы

### **Ресурсы (Resources)**
*   **Дерево (Wood):** Базовый ресурс из деревьев.
*   **Камень/Железо (Iron):** Из камней.
*   **Кристаллы (Crystal):** Редкая валюта. Добывается из фиолетовых кристаллов или за рекламу.
*   **Энергия (Energy):**
    *   Лимит: 100 (растет с уровнем).
    *   Расход: -1 за удар инструментом, -Урон от мобов (смягчен на 40%).
    *   Восстановление: Пассивно (+1/сек при простое) или предметами (Шоколад).

### **Инструменты (Tools)**
Каждый инструмент имеет параметры: `efficiency` (множитель добычи), `speed` (скорость анимации), `level`.
1.  **Каменный Топор:** На старте.
2.  **Железный Инструмент:** Эффективность x2.
3.  **Золотой Инструмент:** Эффективность x5.
4.  **Алмазный Бур:** Эффективность x10.

### **Строительство (Buildings)**
Здания дают пассивный доход или перерабатывают ресурсы (оффлайн-доход до 8 часов).
*   **Костер (Bonfire):** Реген HP/Энергии (в планах).
*   **Лесопилка:** Авто-добыча дерева.
*   **Шахта:** Авто-добыча камня.
*   **Плавильня (Smelter):** Переработка ресурсов.
*   **Магическая Башня:** Защита (планировалось).
*   **Портал Измерений:** Цель игры (Endgame).

### **Боевая Система (Combat)**
*   **Мобы:** Слаймы, Скелеты (бесконечный спавн вокруг игрока).
*   **Боссы:** Огромные усиленные мобы с полоской HP и уникальным именем.
    *   *Спавн:* Редко, вдали от игрока.
    *   *Дроп:* Большой опыт, Кристаллы, шанс выпадения "Ключа".
*   **Урон:** Зависит от инструмента и навыка "Сила".
*   **Крит:** Зависит от навыка "Удача".

### **Прокачка (RPG Elements)**
*   **Уровень игрока (XP):** Дается за сбор ресурсов и убийство мобов.
    *   Каждый уровень: +10 макс. энергии, полное восстановление.
*   **Навыки (Skills):** Покупаются за кристаллы/золото.
    *   `Speed`: Скорость бега (+10%/lvl).
    *   `Efficiency`: Добыча ресурсов (+20%/lvl).
    *   `Luck`: Шанс крита (+5%/lvl).
    *   `Backpack`: (Не реализовано визуально, но в коде есть).

---

## 3. Монетизация и Adsgram
Проект использует **Adsgram** (официальная рекламная сеть Telegram).
*   **Unit ID:** `20849`.
*   **Тип:** Rewarded Video (Видео за вознаграждение).
*   **Точки входа:**
    1.  **Free Gems:** Кнопка в UI (+50 Кристаллов).
    2.  **Energy refill:** (Опционально) Восстановление энергии.
*   **Защита:**
    *   Тайм-аут загрузки SDK (10 сек).
    *   Проверка на блокировщики рекламы/VPN.
    *   Награда выдается *только* после успешного callback'а от Adsgram.

---

## 4. Технические Детали

### **Файловая Структура**
*   `src/main.js`: Точка входа, инициализация менеджеров.
*   `src/scenes/GameScene.js`: Главный цикл игры, логика мира.
*   `src/core/StorageManager.js`: Сохранение (CloudStorage + LocalStorage) и синхронизация.
*   `src/systems/AdsManager.js`: Обертка над Adsgram SDK.
*   `src/data/GameData.js`: Конфиги всех предметов, мобов и баланса.

### **Оптимизация**
*   **Code Splitting:** Разделение на `index.js` (код игры) и `vendor.js` (библиотеки Phaser/Supabase) для быстрой загрузки.
*   **Obfuscation:** Код игры обфусцирован при билде для защиты.

### **Интеграции**
*   **Telegram WebApp API:**
    *   Адаптация под тему (Dark/Light).
    *   Haptic Feedback (Вибрация).
    *   CloudStorage (Облако сохранений).
*   **Supabase:** Глобальный лидерборд игроков.

---

## 5. Графика и Ассеты
*   **Спрайты:** Пиксель-арт (16x16, 32x32).
*   **Атлас:** Используется `spritesheet.png` с анимациями игрока (walk, idle) и мобов.
*   **UI:** Стилизация "Glassmorphism" (стекло, неон) через CSS (`styles/main.css`).

---

## 6. Как запустить
1.  **Dev:** `npm run dev`
2.  **Build:** `npm run build` (Vite -> dist)
3.  **Deploy:** Автоматический деплой на Vercel при пуше в `main`.

---
*Документ автоматически сгенерирован Antigravity Agent для передачи в LLM.*
